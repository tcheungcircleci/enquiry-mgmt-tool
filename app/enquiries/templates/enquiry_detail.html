{% load static %}
{% include 'base.html' %}
{% include 'partials/govuk_header_partial.html' %}

<div class="govuk-width-container">
    <a href="{% url 'enquiry-list' %}" class="govuk-back-link">Back</a>
    <main class="govuk-main-wrapper">
        {% csrf_token %}
        {% load widget_tweaks %}
        {% load rest_framework %}

        <div class="govuk-grid-row enquiry-details-row enquiry-details-header">
            <h2 class="govuk-heading-l">{{ enquiry.company_name }}</h2>
            <dl class="govuk-summary-list--no-border">
                <!-- TODO: Change label to 'Date received' -->
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.created %}
                <!-- TODO: Change label to 'Date last updated' -->
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.modified %}
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.get_enquiry_stage_display %}
                <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key">
                        {{ enquiry.owner.label }}
                    </dt>
                    <dd class="govuk-summary-list__value">{% if obj.owner %}{{ obj.owner.user }} {%else%}
                        {{ "Unassigned" }} {%endif%}</dd>
                </div>
            </dl>
        </div>
        <div class="govuk-grid-row enquiry-details-row">
            <h3 class="govuk-heading-m">Enquiry details</h3>
            <dl class="govuk-summary-list">
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.enquiry_text %}
                <!-- TODO: Change label to 'Investment readiness ("Which of these best describes how you feel about expanding to the UK?")' -->
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.get_investment_readiness_display %}
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.get_quality_display %}
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.get_first_response_channel_display %}
            </dl>
        </div>
        <div class="govuk-grid-row enquiry-details-row">
            <h3 class="govuk-heading-m">Company details</h3>
            <dl class="govuk-summary-list">
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.website %}
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.get_country_display %}
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.get_region_display %}
                <!-- TODO: Change label to 'Company HQ address' -->
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.company_hq_address %}
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.get_primary_sector_display %}
                <!-- TODO: Change label to 'IST sector' -->
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.get_ist_sector_display %}
            </dl>
        </div>
        <div class="govuk-grid-row enquiry-details-row">
            <h3 class="govuk-heading-m">Contact</h3>
            <dl class="govuk-summary-list">
                <!-- TODO: Change label to 'Enquirer first name' -->
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.enquirer.first_name %}
                <!-- TODO: Change label to 'Enquirer last name' -->
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.enquirer.last_name %}
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.enquirer.job_title %}
                <!-- TODO: Change label to 'Enquirer email address' -->
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.enquirer.email %}
                <!-- TODO: Change label to 'Telephone number' -->
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.enquirer.phone %}
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.enquirer.get_request_for_call_display %}
            </dl>
        </div>
        <div class="govuk-grid-row enquiry-details-row">
            <h3 class="govuk-heading-m">Marketing</h3>
            <dl class="govuk-summary-list">
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.google_campaign %}
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.get_marketing_channel_display %}
                <!-- TODO: Change label to 'How did they hear about DIT?' -->
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.get_how_they_heard_dit_display %}
                <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key">
                        Consent (email)
                    </dt>
                    <dd class="govuk-summary-list__value">
                        {% if enquiry.email_consent.value %}{{ 'Yes' }}{% else %}{{ 'No' }}{% endif %}</dd>
                </div>
                <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key">
                        Consent (telephone)
                    </dt>
                    <dd class="govuk-summary-list__value">
                        {% if enquiry.phone_consent.value %}{{ 'Yes' }}{% else %}{{ 'No' }}{% endif %}</dd>
                </div>
            </dl>
        </div>
        <div class="govuk-grid-row enquiry-details-row">
            <h3 class="govuk-heading-m">HPO details</h3>
            <dl class="govuk-summary-list">
                <!-- TODO: Change label to 'HPO selection' -->
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.get_first_hpo_selection_display %}
                
            </dl>
        </div>

        <div class="govuk-grid-row enquiry-details-row">
            <h3 class="govuk-heading-m">Data Hub</h3>
            <dl class="govuk-summary-list">
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.get_organisation_type_display %}
                <!-- TODO: Change label to 'Type of investment' -->
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.get_investment_type_display %}
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.project_name %}
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.project_description %}
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.anonymised_project_description %}
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.estimated_land_date %}
                <!-- TODO: Change label to 'New or existing investor' -->
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.get_new_existing_investor_display %}
                <!-- TODO: Change label to 'Investor level of involvement' -->
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.get_investor_involvement_level_display %}
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.get_specific_investment_programme_display %}
                <!-- TODO: Change label to 'CRM' -->
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.crm %}
                <!-- TODO: Change label to 'Date added to Data Hub' -->
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.date_added_to_datahub %}
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.project_code %}
                <!-- TODO: Change label to 'Data Hub project status' -->
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.get_datahub_project_status_display %}
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.project_success_date %}
            </dl>
        </div>
        <div class="govuk-grid-row enquiry-details-row">
            <h3 class="govuk-heading-m">Notes</h3>
            <dl class="govuk-summary-list">
                {% include 'snippets/summary_list_key_value.html' with field=enquiry.notes %}
            </dl>
        </div>
    </main>
</div>
{% include 'partials/govuk_footer_partial.html' %}